<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PromoHub - Temukan Promo Terbaikmu</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- ... (Bagian header, main, dan section lainnya tetap sama) ... -->
    <div class="banner-carousel" id="bannerCarousel">
</div>

    <main>
        <section class="steps-section">
            <h2>Cara Kerja PromoHub</h2>
            <div class="steps-container">
                <div class="step-card">
                    <img src="images/icons/search.png" alt="Cari Produk" class="step-icon">
                    <h3>1. Cari Produk</h3>
                    <p>Temukan produk favoritmu dari toko-toko terkemuka.</p>
                </div>
                <div class="step-card">
                    <img src="images/icons/buy.png" alt="Beli di E-Commerce" class="step-icon">
                    <h3>2. Beli di E-Commerce</h3>
                    <p>Beli produk melalui link e-commerce yang tersedia.</p>
                </div>
                <div class="step-card">
                    <img src="images/icons/claim.png" alt="Klaim Cashback" class="step-icon">
                    <h3>3. Klaim Cashback</h3>
                    <p>Upload bukti pembelian dan dapatkan cashback di dompetmu.</p>
                </div>
            </div>
        </section>

        <section class="products-section">
            <h2>Produk Pilihan</h2>
            <div id="productsList" class="items-grid"></div>
            <div class="more-btn-container">
                <a href="products.html" class="more-btn">Lihat Semua Produk</a>
            </div>
        </section>

        <section class="stores-section">
            <h2>Toko Teratas</h2>
            <div id="storesList" class="items-grid"></div>
            <div class="more-btn-container">
    <a href="stores.html" class="more-btn">Lihat Semua Toko</a>
</div>
        </section>

        <section class="promos-section">
            <h2>Promo Terbaru</h2>
            <div id="promosList" class="items-grid"></div>
            <div class="more-btn-container">
    <a href="promos.html" class="more-btn">Lihat Semua Promo</a>
</div>
        </section>
    </main>

    <!-- ====== MODAL DENGAN STRUKTUR BARU ====== -->
    <div id="itemModal" class="modal">
        <div class="modal-content">
            <span id="closeModalBtn" class="close-btn">&times;</span>
            <h3 id="modalTitle"></h3>
            <p id="modalDescription"></p>
            <p id="modalInfo"></p>
            <!-- Container baru untuk daftar link vertikal -->
            <div id="modalLinksList" class="modal-links-list">
                <!-- Link akan diisi oleh JavaScript di sini -->
            </div>
        </div>
    </div>

    <!-- ... (Navbar tetap sama) ... -->
    <nav class="navbar">
        <a href="index.html" class="active">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
            <span>Home</span>
        </a>
        
        <a href="wallet.html">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 12V8H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h12v4"></path><path d="M4 6v12a2 2 0 0 0 2 2h14v-4"></path><path d="M18 12a2 2 0 0 0-2 2c0 1.1.9 2 2 2h2v-4h-2z"></path></svg>
            <span>Dompet</span>
        </a>
        <a href="profile.html">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
            <span>Profil</span>
        </a>
    </nav>
    
    <!-- ====== SCRIPTS ====== -->
    <script type="module" src="js/app.js"></script>
    <script type="module" src="js/products.js"></script>
    <script type="module" src="js/banners.js"></script>

    <!-- Skrip Modal yang Diperbarui -->
    <script>
        const modal = document.getElementById('itemModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalDesc = document.getElementById('modalDescription');
        const modalInfo = document.getElementById('modalInfo');
        const modalLinksList = document.getElementById('modalLinksList'); // Target baru
        const closeModalBtn = document.getElementById('closeModalBtn');

        // Mapping nama platform untuk tampilan yang lebih baik
        const platformNames = {
            tokopedia: 'Tokopedia',
            shopee: 'Shopee',
            lazada: 'Lazada',
            blibli: 'Blibli',
            tiktok: 'TikTok Shop'
        };

        function showModal(item, type) {
            modalTitle.textContent = item.title || item.name;
            modalDesc.textContent = item.description;
            
            if (type === 'product') {
                modalInfo.textContent = `Cashback: Rp ${item.cashback}`;
            } else {
                modalInfo.textContent = '';
            }

            // Kosongkan dan isi daftar link vertikal
            modalLinksList.innerHTML = '';
            for (const [platform, url] of Object.entries(item.links)) {
                if (url && url !== '#') {
                    const linkItem = document.createElement('a');
                    linkItem.href = url;
                    linkItem.target = '_blank';
                    linkItem.className = 'modal-link-item';
                    
                    linkItem.innerHTML = `
                        <img src="images/icons/${platform}.png" alt="${platform}">
                        <span>Beli di ${platformNames[platform] || platform}</span>
                    `;
                    modalLinksList.appendChild(linkItem);
                }
            }
            modal.style.display = 'flex';
        }

        function closeModal() {
            modal.style.display = 'none';
        }

        closeModalBtn.addEventListener('click', closeModal);
        window.addEventListener('click', (event) => {
            if (event.target === modal) {
                closeModal();
            }
        });

        // Jadikan fungsi showModal global
        window.showModal = showModal;
        
        
    </script>
</body>
</html>
